# ğŸ¤– å®‡æ ‘æœºå™¨äººåŒè‡‚5æŒ‡çµå·§æ‰‹æŠ“å–å…¨æµç¨‹é¡¹ç›®

> **å®Œæ•´çš„ä»¿çœŸã€æ•°æ®é‡‡é›†ã€æ¨¡å‹è®­ç»ƒã€å¾®è°ƒã€éƒ¨ç½²è§£å†³æ–¹æ¡ˆ**

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/Python-3.8+-green.svg)](https://www.python.org/)
[![Isaac Sim](https://img.shields.io/badge/Isaac%20Sim-4.5%2F5.0-orange.svg)](https://developer.nvidia.com/isaac-sim)

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®åŸºäº **Isaac Lab** å’Œ **Unitree SDK2**ï¼Œä¸ºå®‡æ ‘äººå½¢æœºå™¨äººæä¾›å®Œæ•´çš„åŒè‡‚5æŒ‡çµå·§æ‰‹æŠ“å–è§£å†³æ–¹æ¡ˆã€‚ä»ä»¿çœŸç¯å¢ƒæ­å»ºåˆ°çœŸæœºéƒ¨ç½²ï¼Œæ¶µç›–æœºå™¨äººå­¦ä¹ çš„å…¨æµç¨‹ã€‚

### âœ¨ ä¸»è¦ç‰¹æ€§

- âœ… **å®Œæ•´çš„ä»¿çœŸç¯å¢ƒ**ï¼šåŸºäº Isaac Lab çš„é«˜ä¿çœŸç‰©ç†ä»¿çœŸ
- âœ… **å¤šæœºå™¨äººæ”¯æŒ**ï¼šG1-29dofã€H1-2 äººå½¢æœºå™¨äºº
- âœ… **å¤šçµå·§æ‰‹æ”¯æŒ**ï¼šDex1ï¼ˆ2æŒ‡ï¼‰ã€Dex3ï¼ˆ3æŒ‡ï¼‰ã€Inspireï¼ˆ5æŒ‡ï¼‰
- âœ… **ä¸°å¯Œçš„ä»»åŠ¡åœºæ™¯**ï¼šæŠ“å–ã€æ”¾ç½®ã€å †å ã€å…¨èº«ç§»åŠ¨ç­‰
- âœ… **é¥æ“ä½œæ•°æ®é‡‡é›†**ï¼šæ”¯æŒ VR/XR é¥æ“ä½œé‡‡é›†ä¸“å®¶æ¼”ç¤º
- âœ… **æ•°æ®å¢å¼º**ï¼šè‡ªåŠ¨ç”Ÿæˆå¤šæ ·åŒ–è®­ç»ƒæ•°æ®
- âœ… **æ¨¡å‹è®­ç»ƒ**ï¼šè¡Œä¸ºå…‹éš†ã€æ‰©æ•£ç­–ç•¥ç­‰ç®—æ³•
- âœ… **çœŸæœºéƒ¨ç½²**ï¼šä¸€é”®éƒ¨ç½²åˆ°çœŸå®æœºå™¨äºº
- âœ… **DDSé€šä¿¡**ï¼šä¸çœŸå®æœºå™¨äººç›¸åŒçš„é€šä¿¡åè®®

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå®‰è£…

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨ç°æœ‰ç¯å¢ƒ
cd /workspace
pip install -r requirements.txt
. fetch_assets.sh

# æ–¹å¼äºŒï¼šä½¿ç”¨Dockerï¼ˆæ¨èï¼‰
docker build -t unitree-sim:latest -f Dockerfile .
```

### 2. è¿è¡Œä»¿çœŸ

```bash
# G1æœºå™¨äºº + Inspireçµå·§æ‰‹æŠ“å–åœ†æŸ±ä½“
python sim_main.py \
  --device cuda \
  --enable_cameras \
  --task Isaac-PickPlace-Cylinder-G129-Inspire-Joint \
  --enable_inspire_dds \
  --robot_type g129
```

### 3. æ•°æ®é‡‡é›†ï¼ˆé…åˆé¥æ“ä½œï¼‰

```bash
# ç»ˆç«¯1: å¯åŠ¨ä»¿çœŸ
python sim_main.py --task <ä»»åŠ¡å> --enable_inspire_dds --robot_type g129

# ç»ˆç«¯2: å¯åŠ¨é¥æ“ä½œï¼ˆéœ€è¦xr_teleoperateé¡¹ç›®ï¼‰
cd /path/to/xr_teleoperate
python teleop_main.py --robot g1 --effector inspire
```

### 4. å¿«é€Ÿè®­ç»ƒ

```bash
# ä½¿ç”¨å¿«é€Ÿè®­ç»ƒè„šæœ¬
./scripts/quick_start_training.sh --data ./teleoperate_data
```

### 5. ç«¯åˆ°ç«¯å·¥ä½œæµç¨‹

```bash
# å®Œæ•´æµç¨‹ï¼šæ•°æ®é‡‡é›† â†’ è®­ç»ƒ â†’ éƒ¨ç½²
./scripts/end_to_end_workflow.sh
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
workspace/
â”‚
â”œâ”€â”€ README.md                          # åŸå§‹README
â”œâ”€â”€ é¡¹ç›®æ€»è§ˆ.md                         # æœ¬æ–‡ä»¶
â”œâ”€â”€ QUICK_REFERENCE.md                # å¿«é€Ÿå‚è€ƒ
â”‚
â”œâ”€â”€ docs/                              # ğŸ“š æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ å®Œæ•´å·¥ä½œæµç¨‹æŒ‡å—.md              # è¯¦ç»†å·¥ä½œæµç¨‹
â”‚   â”œâ”€â”€ APIæ–‡æ¡£.md                     # APIå‚è€ƒæ–‡æ¡£
â”‚   â”œâ”€â”€ isaacsim4.5_install.md       # å®‰è£…æŒ‡å—
â”‚   â””â”€â”€ isaacsim5.0_install.md
â”‚
â”œâ”€â”€ configs/                           # âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ bc_inspire_hand.yaml          # è¡Œä¸ºå…‹éš†è®­ç»ƒé…ç½®
â”‚   â”œâ”€â”€ deployment_config.yaml        # éƒ¨ç½²é…ç½®
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ training/                          # ğŸ“ è®­ç»ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ data_preprocessing.py         # æ•°æ®é¢„å¤„ç†
â”‚   â”œâ”€â”€ train_bc.py                   # è¡Œä¸ºå…‹éš†è®­ç»ƒ
â”‚   â”œâ”€â”€ train_diffusion.py            # æ‰©æ•£ç­–ç•¥è®­ç»ƒï¼ˆå¾…å®ç°ï¼‰
â”‚   â””â”€â”€ evaluate.py                   # æ¨¡å‹è¯„ä¼°ï¼ˆå¾…å®ç°ï¼‰
â”‚
â”œâ”€â”€ deployment/                        # ğŸš€ éƒ¨ç½²æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ convert_to_onnx.py            # æ¨¡å‹è½¬æ¢
â”‚   â”œâ”€â”€ deploy_to_robot.py            # çœŸæœºéƒ¨ç½²
â”‚   â””â”€â”€ monitor_robot.py              # å®æ—¶ç›‘æ§ï¼ˆå¾…å®ç°ï¼‰
â”‚
â”œâ”€â”€ scripts/                           # ğŸ“œ å®ç”¨è„šæœ¬
â”‚   â”œâ”€â”€ end_to_end_workflow.sh        # ç«¯åˆ°ç«¯å·¥ä½œæµç¨‹
â”‚   â””â”€â”€ quick_start_training.sh       # å¿«é€Ÿè®­ç»ƒè„šæœ¬
â”‚
â”œâ”€â”€ sim_main.py                        # ğŸ® ä»¿çœŸä¸»ç¨‹åº
â”œâ”€â”€ data_processor.py                  # æ•°æ®å¤„ç†å·¥å…·
â”œâ”€â”€ quick_start.py                     # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ action_provider/                   # åŠ¨ä½œæä¾›è€…
â”œâ”€â”€ dds/                               # DDSé€šä¿¡
â”œâ”€â”€ image_server/                      # å›¾åƒæœåŠ¡
â”œâ”€â”€ layeredcontrol/                    # æ§åˆ¶ç³»ç»Ÿ
â”œâ”€â”€ robots/                            # æœºå™¨äººé…ç½®
â”œâ”€â”€ tasks/                             # ä»»åŠ¡å®šä¹‰
â”‚   â”œâ”€â”€ g1_tasks/                     # G1ä»»åŠ¡
â”‚   â”œâ”€â”€ h1-2_tasks/                   # H1-2ä»»åŠ¡
â”‚   â”œâ”€â”€ common_config/                # é€šç”¨é…ç½®
â”‚   â”œâ”€â”€ common_scene/                 # é€šç”¨åœºæ™¯
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ tools/                             # ğŸ› ï¸ å·¥å…·é›†
    â”œâ”€â”€ augmentation_utils.py         # æ•°æ®å¢å¼º
    â”œâ”€â”€ data_json_load.py             # æ•°æ®åŠ è½½
    â””â”€â”€ ...
```

---

## ğŸ¯ æ”¯æŒçš„ä»»åŠ¡

### G1-29dof æœºå™¨äºº

| æ‰§è¡Œå™¨ | ä»»åŠ¡ | ä»»åŠ¡åç§° |
|--------|------|---------|
| Dex1 | æŠ“å–åœ†æŸ±ä½“ | `Isaac-PickPlace-Cylinder-G129-Dex1-Joint` |
| Dex1 | æŠ“å–çº¢è‰²æ–¹å— | `Isaac-PickPlace-RedBlock-G129-Dex1-Joint` |
| Dex1 | å †å æ–¹å— | `Isaac-Stack-RgyBlock-G129-Dex1-Joint` |
| Dex1 | å…¨èº«ç§»åŠ¨æŠ“å– | `Isaac-Move-Cylinder-G129-Dex1-Wholebody` |
| Dex3 | æŠ“å–åœ†æŸ±ä½“ | `Isaac-PickPlace-Cylinder-G129-Dex3-Joint` |
| Dex3 | æŠ“å–çº¢è‰²æ–¹å— | `Isaac-PickPlace-RedBlock-G129-Dex3-Joint` |
| Dex3 | å †å æ–¹å— | `Isaac-Stack-RgyBlock-G129-Dex3-Joint` |
| Dex3 | å…¨èº«ç§»åŠ¨æŠ“å– | `Isaac-Move-Cylinder-G129-Dex3-Wholebody` |
| Inspire | æŠ“å–åœ†æŸ±ä½“ | `Isaac-PickPlace-Cylinder-G129-Inspire-Joint` |
| Inspire | æŠ“å–çº¢è‰²æ–¹å— | `Isaac-PickPlace-RedBlock-G129-Inspire-Joint` |
| Inspire | å †å æ–¹å— | `Isaac-Stack-RgyBlock-G129-Inspire-Joint` |
| Inspire | å…¨èº«ç§»åŠ¨æŠ“å– | `Isaac-Move-Cylinder-G129-Inspire-Wholebody` |

### H1-2 æœºå™¨äºº

| æ‰§è¡Œå™¨ | ä»»åŠ¡ | ä»»åŠ¡åç§° |
|--------|------|---------|
| Inspire | æŠ“å–åœ†æŸ±ä½“ | `Isaac-PickPlace-Cylinder-H12-27dof-Inspire-Joint` |
| Inspire | æŠ“å–çº¢è‰²æ–¹å— | `Isaac-PickPlace-RedBlock-H12-27dof-Inspire-Joint` |
| Inspire | å †å æ–¹å— | `Isaac-Stack-RgyBlock-H12-27dof-Inspire-Joint` |

---

## ğŸ“Š å®Œæ•´å·¥ä½œæµç¨‹

```mermaid
graph LR
    A[1. ä»¿çœŸç¯å¢ƒæ­å»º] --> B[2. é¥æ“ä½œæ•°æ®é‡‡é›†]
    B --> C[3. æ•°æ®å¢å¼º]
    C --> D[4. æ•°æ®é¢„å¤„ç†]
    D --> E[5. æ¨¡å‹è®­ç»ƒ]
    E --> F[6. æ¨¡å‹è¯„ä¼°]
    F --> G[7. æ¨¡å‹è½¬æ¢ONNX]
    G --> H[8. ä»¿çœŸæµ‹è¯•]
    H --> I{æ•ˆæœæ˜¯å¦æ»¡æ„?}
    I -->|å¦| E
    I -->|æ˜¯| J[9. çœŸæœºéƒ¨ç½²]
    J --> K[10. åœ¨çº¿å¾®è°ƒ]
```

### è¯¦ç»†æ­¥éª¤

#### æ­¥éª¤1: ä»¿çœŸç¯å¢ƒæ­å»º
```bash
python sim_main.py --task <ä»»åŠ¡å> --enable_inspire_dds --robot_type g129
```

#### æ­¥éª¤2: æ•°æ®é‡‡é›†ï¼ˆ20-50ä¸ªæ¼”ç¤ºï¼‰
é…åˆ [xr_teleoperate](https://github.com/unitreerobotics/xr_teleoperate) é¡¹ç›®é‡‡é›†ä¸“å®¶æ¼”ç¤º

#### æ­¥éª¤3: æ•°æ®å¢å¼º
```bash
python sim_main.py --replay_data --generate_data --modify_light --modify_camera
```

#### æ­¥éª¤4: æ•°æ®é¢„å¤„ç†
```bash
python training/data_preprocessing.py --data_dirs "./data1,./data2" --normalize
```

#### æ­¥éª¤5: æ¨¡å‹è®­ç»ƒ
```bash
python training/train_bc.py --config configs/bc_inspire_hand.yaml --epochs 100
```

#### æ­¥éª¤6-9: è¯„ä¼°ã€è½¬æ¢ã€æµ‹è¯•ã€éƒ¨ç½²
è¯¦è§ [å®Œæ•´å·¥ä½œæµç¨‹æŒ‡å—](docs/å®Œæ•´å·¥ä½œæµç¨‹æŒ‡å—.md)

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### 1. æ•°æ®é¢„å¤„ç†

```python
from training.data_preprocessing import DataPreprocessor

preprocessor = DataPreprocessor(
    data_dirs=["./data1", "./data2"],
    output_dir="./processed_data",
    normalize=True,
    augment=True
)
preprocessor.process()
```

### 2. æ¨¡å‹è®­ç»ƒ

```python
from training.train_bc import BCTrainer

config = {
    'data_dir': './processed_data',
    'output_dir': './models/my_model',
    'epochs': 100,
    'batch_size': 64,
    'learning_rate': 3e-4
}

trainer = BCTrainer(config)
trainer.train()
```

### 3. æ¨¡å‹éƒ¨ç½²

```python
from deployment.deploy_to_robot import RobotDeployer

deployer = RobotDeployer(
    model_path="./models/my_model/model.onnx",
    robot_type="g1",
    robot_ip="192.168.123.10",
    effector="inspire",
    safety_mode=True
)

deployer.run(frequency=50.0)
```

---

## ğŸ“š æ–‡æ¡£èµ„æº

### æ ¸å¿ƒæ–‡æ¡£
- ğŸ“– [å®Œæ•´å·¥ä½œæµç¨‹æŒ‡å—](docs/å®Œæ•´å·¥ä½œæµç¨‹æŒ‡å—.md) - ä»å¤´åˆ°å°¾çš„è¯¦ç»†æ•™ç¨‹
- ğŸ“˜ [APIæ–‡æ¡£](docs/APIæ–‡æ¡£.md) - å®Œæ•´çš„APIå‚è€ƒ
- ğŸ” [å¿«é€Ÿå‚è€ƒ](QUICK_REFERENCE.md) - å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥
- ğŸŒ [ä¸­æ–‡README](README_zh-CN.md) - åŸå§‹é¡¹ç›®æ–‡æ¡£

### å®‰è£…æŒ‡å—
- [Isaac Sim 4.5 å®‰è£…](doc/isaacsim4.5_install_zh.md)
- [Isaac Sim 5.0 å®‰è£…](doc/isaacsim5.0_install_zh.md)

---

## ğŸ“ ç¤ºä¾‹å’Œæ•™ç¨‹

### ç¤ºä¾‹1: è®­ç»ƒG1æœºå™¨äººä½¿ç”¨Inspireæ‰‹æŠ“å–åœ†æŸ±ä½“

```bash
# 1. æ•°æ®é‡‡é›†ï¼ˆå‡è®¾å·²å®Œæˆï¼‰
# 2. å¿«é€Ÿè®­ç»ƒ
./scripts/quick_start_training.sh \
  --data ./teleoperate_data \
  --output ./models/cylinder_grasp \
  --epochs 100

# 3. ä»¿çœŸæµ‹è¯•
python sim_main.py \
  --task Isaac-PickPlace-Cylinder-G129-Inspire-Joint \
  --action_source policy \
  --model_path ./models/cylinder_grasp/model.onnx

# 4. çœŸæœºéƒ¨ç½²
python deployment/deploy_to_robot.py \
  --model_path ./models/cylinder_grasp/model.onnx \
  --robot_ip 192.168.123.10 \
  --safety_mode
```

### ç¤ºä¾‹2: ä½¿ç”¨ç«¯åˆ°ç«¯è„šæœ¬

```bash
# å®Œæ•´æµç¨‹ä¸€é”®è¿è¡Œ
./scripts/end_to_end_workflow.sh \
  --robot-type g1 \
  --effector inspire \
  --task Isaac-PickPlace-Cylinder-G129-Inspire-Joint
```

---

## ğŸ› ï¸ å¼€å‘å’Œè´¡çŒ®

### æ·»åŠ æ–°ä»»åŠ¡

1. åœ¨ `tasks/common_scene/` åˆ›å»ºåœºæ™¯é…ç½®
2. åœ¨ `tasks/g1_tasks/` æˆ– `tasks/h1-2_tasks/` åˆ›å»ºä»»åŠ¡å®šä¹‰
3. æ³¨å†Œä»»åŠ¡åç§°
4. é…ç½®è§‚æµ‹å’Œå¥–åŠ±å‡½æ•°

è¯¦ç»†æ­¥éª¤è§ [åŸREADME](README_zh-CN.md#3-ä»»åŠ¡åœºæ™¯æ­å»º)

### å®ç°æ–°çš„è®­ç»ƒç®—æ³•

å‚è€ƒ `training/train_bc.py` å®ç°ï¼š
- `train_diffusion.py` - æ‰©æ•£ç­–ç•¥
- `train_act.py` - Action Chunking Transformer
- ç­‰ç­‰

---

## âš™ï¸ ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚
- **GPU**: NVIDIA RTX 3080 æˆ–æ›´é«˜ï¼ˆæ¨è RTX 4090ï¼‰
- **CPU**: 8æ ¸ä»¥ä¸Š
- **å†…å­˜**: 32GB+
- **å­˜å‚¨**: 100GB+

### è½¯ä»¶è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04 / 22.04
- **Python**: 3.8+
- **Isaac Sim**: 4.5.0 / 5.0.0
- **CUDA**: 11.8 / 12.2

---

## ğŸ› æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. DDSé€šä¿¡å¤±è´¥
```bash
export CYCLONEDDS_URI='<CycloneDDS><Domain><Id>1</Id></Domain></CycloneDDS>'
```

#### 2. GPUå†…å­˜ä¸è¶³
- å‡å°æ‰¹æ¬¡å¤§å°
- ä½¿ç”¨ `--headless` æ¨¡å¼
- å‡å°æ¨¡å‹å¤§å°

#### 3. ä»¿çœŸé€Ÿåº¦æ…¢
```bash
python sim_main.py --headless --no_render --render_interval 10
```

æ›´å¤šé—®é¢˜è§ [å®Œæ•´å·¥ä½œæµç¨‹æŒ‡å— - æ•…éšœæ’æŸ¥](docs/å®Œæ•´å·¥ä½œæµç¨‹æŒ‡å—.md#æ•…éšœæ’æŸ¥)

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ä»¿çœŸæ€§èƒ½
- **æ§åˆ¶é¢‘ç‡**: 50-100 Hz
- **æ¸²æŸ“é¢‘ç‡**: 30-60 FPS
- **ç‰©ç†æ­¥é•¿**: 0.01s

### è®­ç»ƒæ€§èƒ½ï¼ˆRTX 4090ï¼‰
- **è®­ç»ƒé€Ÿåº¦**: ~500 samples/s
- **å†…å­˜å ç”¨**: ~8GB VRAM
- **æ”¶æ•›æ—¶é—´**: 1-2å°æ—¶ï¼ˆ100 epochsï¼‰

### æ¨ç†æ€§èƒ½
- **ONNXæ¨ç†å»¶è¿Ÿ**: <5ms
- **ç«¯åˆ°ç«¯å»¶è¿Ÿ**: 10-20ms
- **æ§åˆ¶é¢‘ç‡**: 50 Hz

---

## ğŸ“® è”ç³»å’Œæ”¯æŒ

- **Discord**: https://discord.gg/ZwcVwxv5rq
- **GitHub**: https://github.com/unitreerobotics/unitree_sim_isaaclab
- **å®˜ç½‘**: https://www.unitree.com

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) å¼€æºè®¸å¯è¯ã€‚

---

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹å¼€æºé¡¹ç›®æ„å»ºï¼š

- [Isaac Lab](https://github.com/isaac-sim/IsaacLab)
- [Isaac Sim](https://github.com/isaac-sim/IsaacSim)
- [Unitree SDK2](https://github.com/unitreerobotics/unitree_sdk2_python)
- [ZMQ](https://github.com/zeromq/pyzmq)

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

```bash
# å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git clone https://github.com/unitreerobotics/unitree_sim_isaaclab.git
cd unitree_sim_isaaclab

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# ä¸‹è½½èµ„äº§
. fetch_assets.sh

# è¿è¡Œç¬¬ä¸€ä¸ªä»¿çœŸ
python sim_main.py \
  --task Isaac-PickPlace-Cylinder-G129-Inspire-Joint \
  --enable_inspire_dds \
  --robot_type g129

# å¼€å§‹ä½ çš„æœºå™¨äººå­¦ä¹ ä¹‹æ—…ï¼ğŸš€
```

---

<div align="center">
  <p><strong>å®‡æ ‘æœºå™¨äºº Ã— Isaac Lab</strong></p>
  <p>æ‰“é€ æœ€å®Œæ•´çš„äººå½¢æœºå™¨äººçµå·§æ‰‹æŠ“å–è§£å†³æ–¹æ¡ˆ</p>
  <p>â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼</p>
</div>
