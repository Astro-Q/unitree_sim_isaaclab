# å®‡æ ‘æœºå™¨äººåŒè‡‚5æŒ‡çµå·§æ‰‹æŠ“å–å…¨æµç¨‹æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
3. [ä»¿çœŸç¯å¢ƒæ­å»º](#ä»¿çœŸç¯å¢ƒæ­å»º)
4. [æ•°æ®é‡‡é›†](#æ•°æ®é‡‡é›†)
5. [æ¨¡å‹è®­ç»ƒä¸å¾®è°ƒ](#æ¨¡å‹è®­ç»ƒä¸å¾®è°ƒ)
6. [æ¨¡å‹éƒ¨ç½²](#æ¨¡å‹éƒ¨ç½²)
7. [å®Œæ•´å·¥ä½œæµç¨‹ç¤ºä¾‹](#å®Œæ•´å·¥ä½œæµç¨‹ç¤ºä¾‹)

---

## ç³»ç»Ÿæ¦‚è¿°

æœ¬é¡¹ç›®æä¾›äº†å®Œæ•´çš„å®‡æ ‘æœºå™¨äººåŒè‡‚5æŒ‡çµå·§æ‰‹æŠ“å–è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒï¼š

### ğŸ¤– æ”¯æŒçš„æœºå™¨äºº
- **G1-29dof**: 29è‡ªç”±åº¦äººå½¢æœºå™¨äºº
- **H1-2**: 27è‡ªç”±åº¦äººå½¢æœºå™¨äºº

### ğŸ¤š æ”¯æŒçš„çµå·§æ‰‹
- **Dex1**: ä¸¤æŒ‡å¹³è¡Œå¤¹çˆª
- **Dex3**: ä¸‰æŒ‡çµå·§æ‰‹
- **Inspire**: äº”æŒ‡çµå·§æ‰‹ï¼ˆæ¨èç”¨äºå¤æ‚æŠ“å–ä»»åŠ¡ï¼‰

### ğŸ“¦ æ”¯æŒçš„ä»»åŠ¡
1. **PickPlace-Cylinder**: æŠ“å–åœ†æŸ±ä½“
2. **PickPlace-RedBlock**: æŠ“å–çº¢è‰²æ–¹å—
3. **Stack-RgyBlock**: å †å å½©è‰²æ–¹å—
4. **Move-Cylinder-Wholebody**: å…¨èº«ç§»åŠ¨æŠ“å–åœ†æŸ±ä½“

---

## ç¯å¢ƒå‡†å¤‡

### 1. ç¡¬ä»¶è¦æ±‚
- **GPU**: NVIDIA RTX 3080 æˆ–æ›´é«˜ï¼ˆæ¨èRTX 4090ï¼‰
- **å†…å­˜**: 32GB æˆ–æ›´å¤š
- **å­˜å‚¨**: 100GB å¯ç”¨ç©ºé—´

### 2. è½¯ä»¶ä¾èµ–å®‰è£…

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ç°æœ‰ç¯å¢ƒ
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /workspace

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# ä¸‹è½½èµ„äº§æ–‡ä»¶
sudo apt update
sudo apt install git-lfs
. fetch_assets.sh
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨Dockerï¼ˆæ¨èï¼‰
```bash
# æ„å»ºDockeré•œåƒ
sudo docker pull nvidia/cuda:12.2.0-runtime-ubuntu22.04
cd /workspace
sudo docker build -t unitree-sim:latest -f Dockerfile .

# è¿è¡ŒDockerå®¹å™¨
xhost +local:docker
sudo docker run --gpus all -it --rm \
  --network host \
  -e NVIDIA_VISIBLE_DEVICES=all \
  -e DISPLAY=$DISPLAY \
  -v /tmp/.X11-unix:/tmp/.X11-unix:rw \
  -v /workspace:/workspace \
  unitree-sim /bin/bash
```

---

## ä»¿çœŸç¯å¢ƒæ­å»º

### 1. å¿«é€Ÿå¯åŠ¨ä»¿çœŸ

#### G1æœºå™¨äºº + Inspireçµå·§æ‰‹ + æŠ“å–åœ†æŸ±ä½“
```bash
python sim_main.py \
  --device cuda \
  --enable_cameras \
  --task Isaac-PickPlace-Cylinder-G129-Inspire-Joint \
  --enable_inspire_dds \
  --robot_type g129
```

#### G1æœºå™¨äºº + Dex3çµå·§æ‰‹ + å †å æ–¹å—
```bash
python sim_main.py \
  --device cuda \
  --enable_cameras \
  --task Isaac-Stack-RgyBlock-G129-Dex3-Joint \
  --enable_dex3_dds \
  --robot_type g129
```

#### H1-2æœºå™¨äºº + Inspireçµå·§æ‰‹ + æŠ“å–çº¢è‰²æ–¹å—
```bash
python sim_main.py \
  --device cuda \
  --enable_cameras \
  --task Isaac-PickPlace-RedBlock-H12-27dof-Inspire-Joint \
  --enable_inspire_dds \
  --robot_type h1_2
```

### 2. ä»¿çœŸå‚æ•°é…ç½®

åˆ›å»ºè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ `configs/custom_task.yaml`:

```yaml
# è‡ªå®šä¹‰ä»»åŠ¡é…ç½®
task_name: "Isaac-PickPlace-Custom-G129-Inspire-Joint"
robot:
  type: "g129"
  effector: "inspire"
  
simulation:
  device: "cuda"
  enable_cameras: true
  step_hz: 100
  physics_dt: 0.01
  
control:
  stiffness:
    arm: 300.0
    hand: 1000.0
  damping:
    arm: 3.0
    hand: 15.0
```

---

## æ•°æ®é‡‡é›†

### 1. ä½¿ç”¨é¥æ“ä½œé‡‡é›†æ•°æ®

#### å‡†å¤‡å·¥ä½œ
é¦–å…ˆéœ€è¦é…åˆ [xr_teleoperate](https://github.com/unitreerobotics/xr_teleoperate) é¡¹ç›®è¿›è¡Œé¥æ“ä½œï¼š

```bash
# åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨é¥æ“ä½œç³»ç»Ÿ
cd /path/to/xr_teleoperate
python teleop_main.py --robot g1 --effector inspire
```

#### å¯åŠ¨ä»¿çœŸç¯å¢ƒï¼ˆæ¥æ”¶é¥æ“ä½œæ•°æ®ï¼‰
```bash
python sim_main.py \
  --device cuda \
  --enable_cameras \
  --task Isaac-PickPlace-Cylinder-G129-Inspire-Joint \
  --enable_inspire_dds \
  --robot_type g129
```

æ•°æ®å°†è‡ªåŠ¨ä¿å­˜åˆ°é¥æ“ä½œé¡¹ç›®çš„æ•°æ®ç›®å½•ä¸­ã€‚

### 2. æ•°æ®å›æ”¾

å›æ”¾å·²é‡‡é›†çš„æ•°æ®ä»¥éªŒè¯è´¨é‡ï¼š

```bash
python sim_main.py \
  --device cuda \
  --enable_cameras \
  --task Isaac-PickPlace-Cylinder-G129-Inspire-Joint \
  --enable_inspire_dds \
  --robot_type g129 \
  --replay_data \
  --file_path "/path/to/your/teleoperate/data"
```

### 3. æ•°æ®å¢å¼º

é€šè¿‡ä¿®æ”¹å…‰ç…§å’Œç›¸æœºå‚æ•°ç”Ÿæˆå¢å¼ºæ•°æ®ï¼š

```bash
python sim_main.py \
  --device cuda \
  --enable_cameras \
  --task Isaac-PickPlace-Cylinder-G129-Inspire-Joint \
  --enable_inspire_dds \
  --robot_type g129 \
  --replay_data \
  --file_path "/path/to/original/data" \
  --generate_data \
  --generate_data_dir "./augmented_data" \
  --modify_light \
  --modify_camera
```

### 4. æ•°æ®æ ¼å¼

é‡‡é›†çš„æ•°æ®åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

```
data/
â”œâ”€â”€ episode_0/
â”‚   â”œâ”€â”€ metadata.json          # å…ƒæ•°æ®ï¼ˆä»»åŠ¡åç§°ã€æ—¶é—´æˆ³ç­‰ï¼‰
â”‚   â”œâ”€â”€ actions.npy            # åŠ¨ä½œåºåˆ—
â”‚   â”œâ”€â”€ observations.npy       # è§‚æµ‹åºåˆ—
â”‚   â”œâ”€â”€ states.npy             # çŠ¶æ€åºåˆ—
â”‚   â””â”€â”€ images/
â”‚       â”œâ”€â”€ front_camera/      # å‰ç½®ç›¸æœºå›¾åƒ
â”‚       â”œâ”€â”€ left_wrist_camera/ # å·¦è…•ç›¸æœºå›¾åƒ
â”‚       â””â”€â”€ right_wrist_camera/# å³è…•ç›¸æœºå›¾åƒ
â”œâ”€â”€ episode_1/
â”‚   â””â”€â”€ ...
â””â”€â”€ dataset_info.json          # æ•°æ®é›†æ€»ä½“ä¿¡æ¯
```

---

## æ¨¡å‹è®­ç»ƒä¸å¾®è°ƒ

### 1. æ•°æ®é¢„å¤„ç†

```bash
# ä½¿ç”¨æ•°æ®å¤„ç†å·¥å…·
python training/data_preprocessing.py \
  --data_root "/path/to/collected/data" \
  --output_dir "./processed_data" \
  --split_ratio 0.9 \
  --normalize \
  --augment
```

### 2. æ¨¡å‹è®­ç»ƒ

#### ä½¿ç”¨è¡Œä¸ºå…‹éš†ï¼ˆBehavior Cloningï¼‰
```bash
python training/train_bc.py \
  --config configs/bc_inspire_hand.yaml \
  --data_dir "./processed_data" \
  --output_dir "./models/bc_inspire" \
  --epochs 100 \
  --batch_size 64 \
  --learning_rate 3e-4
```

#### ä½¿ç”¨æ‰©æ•£ç­–ç•¥ï¼ˆDiffusion Policyï¼‰
```bash
python training/train_diffusion.py \
  --config configs/diffusion_inspire_hand.yaml \
  --data_dir "./processed_data" \
  --output_dir "./models/diffusion_inspire" \
  --epochs 200 \
  --batch_size 32
```

#### ä½¿ç”¨ACT (Action Chunking with Transformers)
```bash
python training/train_act.py \
  --config configs/act_inspire_hand.yaml \
  --data_dir "./processed_data" \
  --output_dir "./models/act_inspire" \
  --epochs 150 \
  --chunk_size 10
```

### 3. æ¨¡å‹å¾®è°ƒ

åŸºäºé¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œå¾®è°ƒï¼š

```bash
python training/finetune.py \
  --pretrained_model "./models/bc_inspire/best_model.pth" \
  --new_data_dir "./new_task_data" \
  --output_dir "./models/bc_inspire_finetuned" \
  --epochs 50 \
  --learning_rate 1e-4 \
  --freeze_encoder
```

### 4. æ¨¡å‹è¯„ä¼°

```bash
python training/evaluate.py \
  --model_path "./models/bc_inspire/best_model.pth" \
  --test_data_dir "./processed_data/test" \
  --output_report "./evaluation_report.json"
```

---

## æ¨¡å‹éƒ¨ç½²

### 1. æ¨¡å‹è½¬æ¢

å°†è®­ç»ƒå¥½çš„PyTorchæ¨¡å‹è½¬æ¢ä¸ºONNXæ ¼å¼ä»¥æé«˜æ¨ç†é€Ÿåº¦ï¼š

```bash
python deployment/convert_to_onnx.py \
  --model_path "./models/bc_inspire/best_model.pth" \
  --output_path "./models/bc_inspire/model.onnx" \
  --input_shape 1 512 \
  --opset_version 14
```

### 2. ä»¿çœŸç¯å¢ƒæµ‹è¯•

åœ¨ä»¿çœŸç¯å¢ƒä¸­æµ‹è¯•éƒ¨ç½²çš„æ¨¡å‹ï¼š

```bash
python sim_main.py \
  --device cuda \
  --enable_cameras \
  --task Isaac-PickPlace-Cylinder-G129-Inspire-Joint \
  --enable_inspire_dds \
  --robot_type g129 \
  --action_source policy \
  --model_path "./models/bc_inspire/model.onnx"
```

### 3. çœŸæœºéƒ¨ç½²

#### å‡†å¤‡å·¥ä½œ
ç¡®ä¿çœŸå®æœºå™¨äººå·²è¿æ¥å¹¶ä¸”DDSé€šä¿¡æ­£å¸¸ï¼š

```bash
# æ£€æŸ¥DDSè¿æ¥
python deployment/check_dds_connection.py --robot_ip 192.168.123.10
```

#### éƒ¨ç½²åˆ°çœŸæœº
```bash
python deployment/deploy_to_robot.py \
  --model_path "./models/bc_inspire/model.onnx" \
  --robot_type g1 \
  --robot_ip 192.168.123.10 \
  --effector inspire \
  --task pick_place \
  --safety_mode enable
```

### 4. å®æ—¶ç›‘æ§

åœ¨å¦ä¸€ä¸ªç»ˆç«¯ç›‘æ§æœºå™¨äººçŠ¶æ€ï¼š

```bash
python deployment/monitor_robot.py \
  --robot_ip 192.168.123.10 \
  --log_dir "./deployment_logs" \
  --visualization
```

---

## å®Œæ•´å·¥ä½œæµç¨‹ç¤ºä¾‹

### åœºæ™¯ï¼šè®­ç»ƒG1æœºå™¨äººä½¿ç”¨Inspireçµå·§æ‰‹æŠ“å–è‡ªå®šä¹‰ç‰©ä½“

#### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡ä»¿çœŸç¯å¢ƒ
```bash
# 1. å¯åŠ¨ä»¿çœŸ
python sim_main.py \
  --device cuda \
  --enable_cameras \
  --task Isaac-PickPlace-CustomObject-G129-Inspire-Joint \
  --enable_inspire_dds \
  --robot_type g129
```

#### ç¬¬äºŒæ­¥ï¼šæ•°æ®é‡‡é›†ï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰
```bash
# 2. å¯åŠ¨é¥æ“ä½œç³»ç»Ÿ
cd /path/to/xr_teleoperate
python teleop_main.py --robot g1 --effector inspire --record

# é‡‡é›†20-50ä¸ªæˆåŠŸçš„æŠ“å–æ¼”ç¤º
```

#### ç¬¬ä¸‰æ­¥ï¼šæ•°æ®å¢å¼º
```bash
# 3. ç”Ÿæˆå¢å¼ºæ•°æ®ï¼ˆå¢åŠ æ•°æ®å¤šæ ·æ€§ï¼‰
python sim_main.py \
  --device cuda \
  --enable_cameras \
  --task Isaac-PickPlace-CustomObject-G129-Inspire-Joint \
  --enable_inspire_dds \
  --robot_type g129 \
  --replay_data \
  --file_path "./teleoperate_data" \
  --generate_data \
  --generate_data_dir "./augmented_data" \
  --modify_light \
  --modify_camera
```

#### ç¬¬å››æ­¥ï¼šæ•°æ®é¢„å¤„ç†
```bash
# 4. åˆå¹¶å’Œé¢„å¤„ç†æ•°æ®
python training/data_preprocessing.py \
  --data_dirs "./teleoperate_data,./augmented_data" \
  --output_dir "./training_data" \
  --split_ratio 0.9 \
  --normalize \
  --augment
```

#### ç¬¬äº”æ­¥ï¼šæ¨¡å‹è®­ç»ƒ
```bash
# 5. è®­ç»ƒæ¨¡å‹
python training/train_bc.py \
  --config configs/bc_inspire_hand.yaml \
  --data_dir "./training_data" \
  --output_dir "./models/custom_object_bc" \
  --epochs 100 \
  --batch_size 64 \
  --use_wandb  # ä½¿ç”¨WandBè¿›è¡Œå®éªŒè·Ÿè¸ª
```

#### ç¬¬å…­æ­¥ï¼šæ¨¡å‹è¯„ä¼°
```bash
# 6. åœ¨ä»¿çœŸä¸­è¯„ä¼°æ¨¡å‹
python training/evaluate_sim.py \
  --model_path "./models/custom_object_bc/best_model.pth" \
  --task Isaac-PickPlace-CustomObject-G129-Inspire-Joint \
  --num_episodes 50 \
  --output_report "./evaluation_report.json"
```

#### ç¬¬ä¸ƒæ­¥ï¼šæ¨¡å‹éƒ¨ç½²
```bash
# 7. è½¬æ¢ä¸ºONNX
python deployment/convert_to_onnx.py \
  --model_path "./models/custom_object_bc/best_model.pth" \
  --output_path "./models/custom_object_bc/model.onnx"

# 8. éƒ¨ç½²åˆ°çœŸæœº
python deployment/deploy_to_robot.py \
  --model_path "./models/custom_object_bc/model.onnx" \
  --robot_type g1 \
  --robot_ip 192.168.123.10 \
  --effector inspire \
  --safety_mode enable \
  --test_mode  # å…ˆåœ¨æµ‹è¯•æ¨¡å¼ä¸‹éªŒè¯
```

---

## é«˜çº§åŠŸèƒ½

### 1. å¤šä»»åŠ¡å­¦ä¹ 

è®­ç»ƒä¸€ä¸ªå¯ä»¥å¤„ç†å¤šç§æŠ“å–ä»»åŠ¡çš„é€šç”¨æ¨¡å‹ï¼š

```bash
python training/train_multitask.py \
  --tasks "pick_cylinder,pick_redblock,stack_blocks" \
  --data_dirs "./data_cylinder,./data_redblock,./data_stack" \
  --output_dir "./models/multitask" \
  --shared_encoder \
  --task_embedding_dim 64
```

### 2. åœ¨çº¿å­¦ä¹ å’Œé€‚åº”

åœ¨çœŸæœºä¸Šè¿›è¡Œåœ¨çº¿å¾®è°ƒï¼š

```bash
python deployment/online_learning.py \
  --model_path "./models/custom_object_bc/model.onnx" \
  --robot_ip 192.168.123.10 \
  --learning_rate 1e-5 \
  --buffer_size 100 \
  --update_interval 10
```

### 3. ä»¿çœŸåˆ°çœŸæœºè¿ç§»ï¼ˆSim2Realï¼‰

ä½¿ç”¨åŸŸéšæœºåŒ–å’ŒåŸŸé€‚åº”æŠ€æœ¯ï¼š

```bash
python training/sim2real_adaptation.py \
  --sim_model "./models/bc_inspire/best_model.pth" \
  --real_data_dir "./real_robot_data" \
  --output_dir "./models/bc_inspire_sim2real" \
  --use_domain_randomization \
  --use_domain_adaptation
```

---

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. DDSé€šä¿¡å¤±è´¥
```bash
# æ£€æŸ¥DDSé…ç½®
echo $CYCLONEDDS_URI
# ç¡®ä¿channelè®¾ç½®ä¸º1
export CYCLONEDDS_URI='<CycloneDDS><Domain><Id>1</Id></Domain></CycloneDDS>'
```

#### 2. ä»¿çœŸé€Ÿåº¦æ…¢
```bash
# ä½¿ç”¨headlessæ¨¡å¼
python sim_main.py --headless --no_render ...

# å‡å°‘ç›¸æœºæ›´æ–°é¢‘ç‡
python sim_main.py --camera_write_interval 5 ...
```

#### 3. GPUå†…å­˜ä¸è¶³
```bash
# å‡å°‘æ‰¹æ¬¡å¤§å°
python training/train_bc.py --batch_size 32 ...

# ä½¿ç”¨æ··åˆç²¾åº¦è®­ç»ƒ
python training/train_bc.py --use_amp ...
```

---

## å‚è€ƒèµ„æº

- **Isaac Labæ–‡æ¡£**: https://isaac-sim.github.io/IsaacLab/
- **Unitree SDK2**: https://github.com/unitreerobotics/unitree_sdk2_python
- **XRé¥æ“ä½œ**: https://github.com/unitreerobotics/xr_teleoperate
- **é¡¹ç›®README**: [README_zh-CN.md](../README_zh-CN.md)

---

## è´¡çŒ®å’Œæ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è®¿é—®ï¼š
- Discord: https://discord.gg/ZwcVwxv5rq
- GitHub Issues: https://github.com/unitreerobotics/unitree_sim_isaaclab/issues
